{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è ‚Äî –ì–æ—Ä–æ–¥ –±–µ–∑ –º—É—Å–æ—Ä–∞{% endblock %}

{% block content %}

<!-- Hero -->
<section class="text-center py-12 px-4 bg-gradient-to-b from-green-100 to-white dark:from-green-900 dark:to-gray-900">
    <h1 class="text-4xl font-extrabold text-green-700 dark:text-green-300 mb-4">–ì–æ—Ä–æ–¥ –±–µ–∑ –º—É—Å–æ—Ä–∞</h1>
    <p class="text-lg text-gray-700 dark:text-gray-300 mb-6">
        –û–±–º–µ–Ω–∏–≤–∞–π—Å—è, –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–π, –≤–¥–æ—Ö–Ω–æ–≤–ª—è–π –¥—Ä—É–≥–∏—Ö. –î–µ–ª–∞–π –≥–æ—Ä–æ–¥ —á–∏—â–µ.
    </p>
    <a href="#" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-xl text-lg shadow">
        –ù–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
    </a>
</section>

<!-- –ó–µ–ª–µ–Ω—ã–µ —Ç–æ—á–∫–∏ -->
<section class="py-12">
    <h2 class="text-2xl font-semibold mb-4">‚ôªÔ∏è –ó–µ–ª—ë–Ω—ã–µ —Ç–æ—á–∫–∏ —Ä—è–¥–æ–º</h2>
    <div class="w-full h-64 bg-gray-100 dark:bg-gray-800 rounded shadow-inner flex items-center justify-center text-gray-500 dark:text-gray-400">
        <div id="map" class="w-full h-[270px] rounded-xl shadow-lg my-6"></div>
    </div>
</section>

<!-- –û–±–º–µ–Ω -->
<section class="px-6 py-10 bg-gray-50 dark:bg-gray-800">
  <h2 class="text-2xl font-semibold mb-6">üîÅ –û–±–º–µ–Ω –≤–µ—â–∞–º–∏</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {% for item in items %}
          <div class="bg-white dark:bg-gray-700 p-4 rounded-xl shadow hover:shadow-lg transition">
              {% if item.image %}
                  <img src="{{ item.image.url }}" alt="{{ item.title }}" class="w-full h-40 object-cover rounded mb-3">
              {% else %}
                  <div class="w-full h-40 bg-gray-200 dark:bg-gray-600 rounded mb-3 flex items-center justify-center text-gray-400">
                    –ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                  </div>
              {% endif %}
              <h3 class="font-bold text-lg text-green-700 dark:text-green-300">{{ item.title }}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">{{ item.category.name }}</p>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">{{ item.location }}</p>
          </div>
      {% endfor %}
  </div>
</section>

<!-- –ß–µ–ª–ª–µ–Ω–¥–∂–∏ -->
<section class="py-10">
    <h2 class="text-2xl font-semibold mb-4">üèÜ –≠–∫–æ—á–µ–ª–ª–µ–Ω–¥–∂–∏</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-green-100 dark:bg-green-900 p-4 rounded-xl">
            <h3 class="text-lg font-bold">–ù–µ–¥–µ–ª—è –±–µ–∑ –ø–ª–∞—Å—Ç–∏–∫–∞</h3>
            <p class="text-sm text-gray-700 dark:text-gray-300">+20 –±–∞–ª–ª–æ–≤</p>
        </div>
        <div class="bg-green-100 dark:bg-green-900 p-4 rounded-xl">
            <h3 class="text-lg font-bold">10 –≤–µ—â–µ–π –Ω–∞ –æ–±–º–µ–Ω</h3>
            <p class="text-sm text-gray-700 dark:text-gray-300">+15 –±–∞–ª–ª–æ–≤</p>
        </div>
    </div>
</section>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const map = L.map('map').setView([55.751244, 37.618423], 12); // –ú–æ—Å–∫–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const greenpoints = {{ greenpoints_json|safe }};  // –°–ø–∏—Å–æ–∫ —Ç–æ—á–µ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ [{name, lat, lng, description}, ...]

    greenpoints.forEach(point => {
        L.marker([point.lat, point.lng])
            .addTo(map)
            .bindPopup(`<b>${point.name}</b><br>${point.description}`);
    });
</script>
{% endblock %}
